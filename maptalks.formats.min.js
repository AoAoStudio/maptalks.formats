!function r(e,t,n){function o(u,a){if(!t[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[u]={exports:{}};e[u][0].call(l.exports,function(r){var t=e[u][1][r];return o(t?t:r)},l,l.exports,r,e,t,n)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(r,e,t){function n(r,e){"addData"in r&&r.addData(e)}function o(r,e,t){var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,function(r,e){return r?o.fire("error",{error:r}):(n(o,JSON.parse(e.responseText)),void o.fire("ready"))}),o}function i(r,e,t){function n(r,t){return r?o.fire("error",{error:r}):(c(t.responseText,e,o),void o.fire("ready"))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function u(r,e,t){function n(r,t){function n(){i=!0}var i;return r?o.fire("error",{error:r}):(o.on("error",n),p(t.responseText,e,o),o.off("error",n),void(i||o.fire("ready")))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function a(r,e,t){function n(r,t){function n(){i=!0}var i;return r?o.fire("error",{error:r}):(o.on("error",n),h(t.responseXML||t.responseText,e,o),o.off("error",n),void(i||o.fire("ready")))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function s(r,e,t){function n(r,t){function n(){i=!0}var i;return r?o.fire("error",{error:r}):(o.on("error",n),d(t.responseXML||t.responseText,e,o),o.off("error",n),void(i||o.fire("ready")))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function f(r,e,t){function n(r,t){return r?o.fire("error",{error:r}):(v(t.responseText,e,o),void o.fire("ready"))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function l(r,e,t){function n(r,t){return r?o.fire("error",{error:r}):(g(t.responseText,e,o),void o.fire("ready"))}var o=t||new N.GeoJSONLayer(r+"_"+N.Util.UID());return m(r,n),o}function c(r,e,t){var o="string"==typeof r?JSON.parse(r):r;t=t||new N.GeoJSONLayer("format_topojson_"+N.Util.UID());for(var i in o.objects){var u=S.feature(o,o.objects[i]);u.features?n(t,u.features):n(t,u)}return t}function p(r,e,t){function o(r,e){return r?t.fire("error",{error:r}):void n(t,e)}return t=t||new N.GeoJSONLayer("format_csv_"+N.Util.UID()),e=e||{},w.csv2geojson(r,e,o),t}function h(r,e,t){var o=y(r);if(!o)return t.fire("error",{error:"Could not parse GPX"});t=t||new N.GeoJSONLayer("format_gpx_"+N.Util.UID());var i=E.gpx(o);return n(t,i),t}function d(r,e,t){var o=y(r);if(!o)return t.fire("error",{error:"Could not parse KML"});t=t||new N.GeoJSONLayer("format_kml_"+N.Util.UID());var i=E.kml(o);return n(t,i),t}function g(r,e,t){t=t||new N.GeoJSONLayer("format_polyline_"+N.Util.UID()),e=e||{};for(var o=L.decode(r,e.precision),i={type:"LineString",coordinates:[]},u=0;u<o.length;u++)i.coordinates[u]=[o[u][1],o[u][0]];return n(t,i),t}function v(r,e,t){t=t||new N.GeoJSONLayer("format_wkt_"+N.Util.UID());var o=x(r);return n(t,o),t}function y(r){return"string"==typeof r?(new DOMParser).parseFromString(r,"text/xml"):r}var m=r("corslite"),w=r("csv2geojson"),x=r("wellknown"),L=r("polyline"),S=r("topojson"),E=r("togeojson"),N="undefined"!=typeof window?window.maptalks:r("maptalks");e.exports.polyline=l,e.exports.polyline.parse=g,e.exports.geojson=o,e.exports.topojson=i,e.exports.topojson.parse=c,e.exports.csv=u,e.exports.csv.parse=p,e.exports.gpx=a,e.exports.gpx.parse=h,e.exports.kml=s,e.exports.kml.parse=d,e.exports.wkt=f,e.exports.wkt.parse=v,N.Formats=e.exports},{corslite:4,csv2geojson:5,maptalks:"maptalks",polyline:8,togeojson:9,topojson:10,wellknown:11}],2:[function(r,e,t){},{}],3:[function(r,e,t){function n(r){if(f===setTimeout)return setTimeout(r,0);try{return f(r,0)}catch(e){try{return f.call(null,r,0)}catch(e){return f.call(this,r,0)}}}function o(r){if(l===clearTimeout)return clearTimeout(r);try{return l(r)}catch(e){try{return l.call(null,r)}catch(e){return l.call(this,r)}}}function i(){d&&p&&(d=!1,p.length?h=p.concat(h):g=-1,h.length&&u())}function u(){if(!d){var r=n(i);d=!0;for(var e=h.length;e;){for(p=h,h=[];++g<e;)p&&p[g].run();g=-1,e=h.length}p=null,d=!1,o(r)}}function a(r,e){this.fun=r,this.array=e}function s(){}var f,l,c=e.exports={};!function(){try{f=setTimeout}catch(r){f=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(r){l=function(){throw new Error("clearTimeout is not defined")}}}();var p,h=[],d=!1,g=-1;c.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];h.push(new a(r,e)),1!==h.length||d||n(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(r){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(r){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],4:[function(r,e,t){function n(r,e,t){function n(r){return r>=200&&r<300||304===r}function o(){void 0===a.status||n(a.status)?e.call(a,null,a):e.call(a,a,null)}var i=!1;if("undefined"==typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"==typeof t){var u=r.match(/^\s*https?:\/\/[^\/]*/);t=u&&u[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var a=new window.XMLHttpRequest;if(t&&!("withCredentials"in a)){a=new window.XDomainRequest;var s=e;e=function(){if(i)s.apply(this,arguments);else{var r=this,e=arguments;setTimeout(function(){s.apply(r,e)},0)}}}return"onload"in a?a.onload=o:a.onreadystatechange=function(){4===a.readyState&&o()},a.onerror=function(r){e.call(this,r||!0,null),e=function(){}},a.onprogress=function(){},a.ontimeout=function(r){e.call(this,r,null),e=function(){}},a.onabort=function(r){e.call(this,r,null),e=function(){}},a.open("GET",r,!0),a.send(null),i=!0,a}"undefined"!=typeof e&&(e.exports=n)},{}],5:[function(r,e,t){function n(r){return!!r.match(/(Lat)(itude)?/gi)}function o(r){return!!r.match(/(L)(on|ng)(gitude)?/i)}function i(r){return"object"==typeof r?Object.keys(r).length:0}function u(r){var e=[",",";","\t","|"],t=[];return e.forEach(function(e){var n=p.dsv(e).parse(r);if(n.length>=1){for(var o=i(n[0]),u=0;u<n.length;u++)if(i(n[u])!==o)return;t.push({delimiter:e,arity:Object.keys(n[0]).length})}}),t.length?t.sort(function(r,e){return e.arity-r.arity})[0].delimiter:null}function a(r){return delete r.columns,r}function s(r){var e=u(r);return e?a(p.dsv(e).parse(r)):null}function f(r,e,t){t||(t=e,e={}),e.delimiter=e.delimiter||",";var i=e.latfield||"",s=e.lonfield||"",f=e.crs||"",l=[],c={type:"FeatureCollection",features:l};if(""!==f&&(c.crs={type:"name",properties:{name:f}}),"auto"===e.delimiter&&"string"==typeof r&&(e.delimiter=u(r),!e.delimiter))return t({type:"Error",message:"Could not autodetect delimiter"});var d="string"==typeof r?p.dsv(e.delimiter).parse(r):r;if(!d.length)return t(null,c);if(!i||!s){for(var g in d[0])!i&&n(g)&&(i=g),!s&&o(g)&&(s=g);if(!i||!s){var v=[];for(var y in d[0])v.push(y);return t({type:"Error",message:"Latitude and longitude fields not present",data:a(d),fields:v})}}for(var m=[],w=0;w<d.length;w++)if(void 0!==d[w][s]&&void 0!==d[w][s]){var x,L,S,E=d[w][s],N=d[w][i];S=h(E,"EW"),S&&(E=S),S=h(N,"NS"),S&&(N=S),x=parseFloat(E),L=parseFloat(N),isNaN(x)||isNaN(L)?m.push({message:"A row contained an invalid value for latitude or longitude",row:d[w]}):(e.includeLatLon||(delete d[w][s],delete d[w][i]),l.push({type:"Feature",properties:d[w],geometry:{type:"Point",coordinates:[parseFloat(x),parseFloat(L)]}}))}t(m.length?m:null,c)}function l(r){for(var e=r.features,t={type:"Feature",geometry:{type:"LineString",coordinates:[]}},n=0;n<e.length;n++)t.geometry.coordinates.push(e[n].geometry.coordinates);return t.properties=e.reduce(function(r,e){for(var t in e.properties)r[t]||(r[t]=[]),r[t].push(e.properties[t]);return r},{}),{type:"FeatureCollection",features:[t]}}function c(r){for(var e=r.features,t={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},n=0;n<e.length;n++)t.geometry.coordinates[0].push(e[n].geometry.coordinates);return t.properties=e.reduce(function(r,e){for(var t in e.properties)r[t]||(r[t]=[]),r[t].push(e.properties[t]);return r},{}),{type:"FeatureCollection",features:[t]}}var p=r("d3-dsv"),h=r("sexagesimal");e.exports={isLon:o,isLat:n,csv:p.csvParse,tsv:p.tsvParse,dsv:p,auto:s,csv2geojson:f,toLine:l,toPolygon:c}},{"d3-dsv":6,sexagesimal:7}],6:[function(r,e,t){!function(r,n){"object"==typeof t&&"undefined"!=typeof e?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n(r.d3_dsv={})}(this,function(r){"use strict";function e(r){return new Function("d","return {"+r.map(function(r,e){return JSON.stringify(r)+": d["+e+"]"}).join(",")+"}")}function t(r,t){var n=e(r);return function(e,o){return t(n(e),o,r)}}function n(r){var e=Object.create(null),t=[];return r.forEach(function(r){for(var n in r)n in e||t.push(e[n]=n)}),t}function o(r){function o(r,n){var o,u,a=i(r,function(r,i){return o?o(r,i-1):(u=r,void(o=n?t(r,n):e(r)))});return a.columns=u,a}function i(r,e){function t(){if(f>=s)return u;if(o)return o=!1,i;var e,t=f;if(34===r.charCodeAt(t)){for(var n=t;n++<s;)if(34===r.charCodeAt(n)){if(34!==r.charCodeAt(n+1))break;++n}return f=n+2,e=r.charCodeAt(n+1),13===e?(o=!0,10===r.charCodeAt(n+2)&&++f):10===e&&(o=!0),r.slice(t+1,n).replace(/""/g,'"')}for(;f<s;){var a=1;if(e=r.charCodeAt(f++),10===e)o=!0;else if(13===e)o=!0,10===r.charCodeAt(f)&&(++f,++a);else if(e!==c)continue;return r.slice(t,f-a)}return r.slice(t)}for(var n,o,i={},u={},a=[],s=r.length,f=0,l=0;(n=t())!==u;){for(var p=[];n!==i&&n!==u;)p.push(n),n=t();e&&null==(p=e(p,l++))||a.push(p)}return a}function u(e,t){return null==t&&(t=n(e)),[t.map(f).join(r)].concat(e.map(function(e){return t.map(function(r){return f(e[r])}).join(r)})).join("\n")}function a(r){return r.map(s).join("\n")}function s(e){return e.map(f).join(r)}function f(r){return l.test(r)?'"'+r.replace(/\"/g,'""')+'"':r}var l=new RegExp('["'+r+"\n]"),c=r.charCodeAt(0);return{parse:o,parseRows:i,format:u,formatRows:a}}var i=o(","),u=i.parse,a=i.parseRows,s=i.format,f=i.formatRows,l=o("\t"),c=l.parse,p=l.parseRows,h=l.format,d=l.formatRows,g="0.2.0";r.version=g,r.dsv=o,r.csvParse=u,r.csvParseRows=a,r.csvFormat=s,r.csvFormatRows=f,r.tsvParse=c,r.tsvParseRows=p,r.tsvFormat=h,r.tsvFormatRows=d})},{}],7:[function(r,e,t){function n(r,e){return u(r,e).val}function o(r){return i(r.lat,"lat")+" "+i(r.lon,"lon")}function i(r,e){var t={lat:["N","S"],lon:["E","W"]}[e]||"",n=t[r>=0?0:1],o=Math.abs(r),i=Math.floor(o),u=o-i,a=60*u,s=Math.floor(a),f=Math.floor(60*(a-s));return i+"° "+(s?s+"' ":"")+(f?f+'" ':"")+n}function u(r,e,t){if(e||(e="NSEW"),"string"!=typeof r)return{val:null,regex:t};t=t||/[\s\,]*([\-|\—|\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/gi;var n=t.exec(r);return n?n[4]&&e.indexOf(n[4])===-1?{val:null,regex:t}:{val:((n[1]?parseFloat(n[1]):0)+(n[2]?parseFloat(n[2])/60:0)+(n[3]?parseFloat(n[3])/3600:0))*(n[4]&&"S"===n[4]||"W"===n[4]?-1:1),regex:t,raw:n[0],dim:n[4]}:{val:null,regex:t}}function a(r,e){r=r.trim();var t=u(r,e);if(null===t.val)return null;var n=u(r,e,t.regex);return null===n.val?null:t.raw+n.raw!==r?null:t.dim?s(t.val,n.val,t.dim):[t.val,n.val]}function s(r,e,t){return"N"==t||"S"==t?[r,e]:"W"==t||"E"==t?[e,r]:void 0}e.exports=n,e.exports.pair=a,e.exports.format=i,e.exports.formatPair=o},{}],8:[function(r,e,t){"use strict";function n(r,e){r=Math.round(r*e),r<<=1,r<0&&(r=~r);for(var t="";r>=32;)t+=String.fromCharCode((32|31&r)+63),r>>=5;return t+=String.fromCharCode(r+63)}function o(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].slice().reverse());return e}var i={};i.decode=function(r,e){for(var t,n,o=0,i=0,u=0,a=[],s=0,f=0,l=null,c=Math.pow(10,e||5);o<r.length;){l=null,s=0,f=0;do l=r.charCodeAt(o++)-63,f|=(31&l)<<s,s+=5;while(l>=32);t=1&f?~(f>>1):f>>1,s=f=0;do l=r.charCodeAt(o++)-63,f|=(31&l)<<s,s+=5;while(l>=32);n=1&f?~(f>>1):f>>1,i+=t,u+=n,a.push([i/c,u/c])}return a},i.encode=function(r,e){if(!r.length)return"";for(var t=Math.pow(10,e||5),o=n(r[0][0],t)+n(r[0][1],t),i=1;i<r.length;i++){var u=r[i],a=r[i-1];o+=n(u[0]-a[0],t),o+=n(u[1]-a[1],t)}return o},i.fromGeoJSON=function(r,e){if(r&&"Feature"===r.type&&(r=r.geometry),!r||"LineString"!==r.type)throw new Error("Input must be a GeoJSON LineString");return i.encode(o(r.coordinates),e)},i.toGeoJSON=function(r,e){var t=i.decode(r,e);return{type:"LineString",coordinates:o(t)}},"object"==typeof e&&e.exports&&(e.exports=i)},{}],9:[function(r,e,t){(function(n){var o=function(){"use strict";function e(r){if(!r||!r.length)return 0;for(var e=0,t=0;e<r.length;e++)t=(t<<5)-t+r.charCodeAt(e)|0;return t}function o(r,e){return r.getElementsByTagName(e)}function i(r,e){return r.getAttribute(e)}function u(r,e){return parseFloat(i(r,e))}function a(r,e){var t=o(r,e);return t.length?t[0]:null}function s(r){return r.normalize&&r.normalize(),r}function f(r){for(var e=0,t=[];e<r.length;e++)t[e]=parseFloat(r[e]);return t}function l(r){var e={};for(var t in r)r[t]&&(e[t]=r[t]);return e}function c(r){return r&&s(r),r&&r.textContent||""}function p(r){return f(r.replace(m,"").split(","))}function h(r){for(var e=r.replace(w,"").split(x),t=[],n=0;n<e.length;n++)t.push(p(e[n]));return t}function d(r){var e,t=[u(r,"lon"),u(r,"lat")],n=a(r,"ele"),o=a(r,"gpxtpx:hr")||a(r,"hr"),i=a(r,"time");return n&&(e=parseFloat(c(n)),isNaN(e)||t.push(e)),{coordinates:t,time:i?c(i):null,heartRate:o?parseFloat(c(o)):null}}function g(){return{type:"FeatureCollection",features:[]}}function v(r){return void 0!==r.xml?r.xml:y.serializeToString(r)}var y,m=/\s*/g,w=/^\s*|\s*$/g,x=/\s+/;"undefined"!=typeof XMLSerializer?y=new XMLSerializer:"object"!=typeof t||"object"!=typeof n||n.browser||(y=new(r("xmldom").XMLSerializer));var L={kml:function(r){function t(r){var e,t;return r=r||"","#"===r.substr(0,1)&&(r=r.substr(1)),6!==r.length&&3!==r.length||(e=r),8===r.length&&(t=parseInt(r.substr(0,2),16)/255,e="#"+r.substr(2)),[e,isNaN(t)?void 0:t]}function n(r){return f(r.split(" "))}function u(r){var e=o(r,"coord","gx"),t=[],i=[];0===e.length&&(e=o(r,"gx:coord"));for(var u=0;u<e.length;u++)t.push(n(c(e[u])));for(var a=o(r,"when"),s=0;s<a.length;s++)i.push(c(a[s]));return{coords:t,times:i}}function s(r){var e,t,n,i,f,l=[],d=[];if(a(r,"MultiGeometry"))return s(a(r,"MultiGeometry"));if(a(r,"MultiTrack"))return s(a(r,"MultiTrack"));if(a(r,"gx:MultiTrack"))return s(a(r,"gx:MultiTrack"));for(n=0;n<m.length;n++)if(t=o(r,m[n]))for(i=0;i<t.length;i++)if(e=t[i],"Point"===m[n])l.push({type:"Point",coordinates:p(c(a(e,"coordinates")))});else if("LineString"===m[n])l.push({type:"LineString",coordinates:h(c(a(e,"coordinates")))});else if("Polygon"===m[n]){var g=o(e,"LinearRing"),v=[];for(f=0;f<g.length;f++)v.push(h(c(a(g[f],"coordinates"))));l.push({type:"Polygon",coordinates:v})}else if("Track"===m[n]||"gx:Track"===m[n]){var y=u(e);l.push({type:"LineString",coordinates:y.coords}),y.times.length&&d.push(y.times)}return{geoms:l,coordTimes:d}}function l(r){var e,n=s(r),u={},f=c(a(r,"name")),l=c(a(r,"styleUrl")),p=c(a(r,"description")),h=a(r,"TimeSpan"),d=a(r,"ExtendedData"),g=a(r,"LineStyle"),v=a(r,"PolyStyle");if(!n.geoms.length)return[];if(f&&(u.name=f),"#"!==l[0]&&(l="#"+l),l&&y[l]&&(u.styleUrl=l,u.styleHash=y[l]),p&&(u.description=p),h){var m=c(a(h,"begin")),w=c(a(h,"end"));u.timespan={begin:m,end:w}}if(g){var x=t(c(a(g,"color"))),L=x[0],S=x[1],E=parseFloat(c(a(g,"width")));L&&(u.stroke=L),isNaN(S)||(u["stroke-opacity"]=S),isNaN(E)||(u["stroke-width"]=E)}if(v){var N=t(c(a(v,"color"))),M=N[0],T=N[1],P=c(a(v,"fill")),k=c(a(v,"outline"));M&&(u.fill=M),isNaN(T)||(u["fill-opacity"]=T),P&&(u["fill-opacity"]="1"===P?1:0),k&&(u["stroke-opacity"]="1"===k?1:0)}if(d){var O=o(d,"Data"),b=o(d,"SimpleData");for(e=0;e<O.length;e++)u[O[e].getAttribute("name")]=c(a(O[e],"value"));for(e=0;e<b.length;e++)u[b[e].getAttribute("name")]=c(b[e])}n.coordTimes.length&&(u.coordTimes=1===n.coordTimes.length?n.coordTimes[0]:n.coordTimes);var F={type:"Feature",geometry:1===n.geoms.length?n.geoms[0]:{type:"GeometryCollection",geometries:n.geoms},properties:u};return i(r,"id")&&(F.id=i(r,"id")),[F]}for(var d=g(),y={},m=["Polygon","LineString","Point","Track","gx:Track"],w=o(r,"Placemark"),x=o(r,"Style"),L=o(r,"StyleMap"),S=0;S<x.length;S++)y["#"+i(x[S],"id")]=e(v(x[S])).toString(16);for(var E=0;E<L.length;E++)y["#"+i(L[E],"id")]=e(v(L[E])).toString(16);for(var N=0;N<w.length;N++)d.features=d.features.concat(l(w[N]));return d},gpx:function(r){function e(r,e){var t=o(r,e),n=[],i=[],u=[],a=t.length;if(a<2)return{};for(var s=0;s<a;s++){var f=d(t[s]);n.push(f.coordinates),f.time&&i.push(f.time),f.heartRate&&u.push(f.heartRate)}return{line:n,times:i,heartRates:u}}function t(r){for(var t,n=o(r,"trkseg"),i=[],a=[],s=[],f=0;f<n.length;f++)t=e(n[f],"trkpt"),t.line&&i.push(t.line),t.times&&t.times.length&&a.push(t.times),t.heartRates&&t.heartRates.length&&s.push(t.heartRates);if(0!==i.length){var l=u(r);return a.length&&(l.coordTimes=1===i.length?a[0]:a),s.length&&(l.heartRates=1===i.length?s[0]:s),{type:"Feature",properties:l,geometry:{type:1===i.length?"LineString":"MultiLineString",coordinates:1===i.length?i[0]:i}}}}function n(r){var t=e(r,"rtept");if(t.line){var n={type:"Feature",properties:u(r),geometry:{type:"LineString",coordinates:t.line}};return n}}function i(r){var e=u(r);return e.sym=c(a(r,"sym")),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:d(r).coordinates}}}function u(r){var e,t=["name","desc","author","copyright","link","time","keywords"],n={};for(e=0;e<t.length;e++)n[t[e]]=c(a(r,t[e]));return l(n)}var s,f,p=o(r,"trk"),h=o(r,"rte"),v=o(r,"wpt"),y=g();for(s=0;s<p.length;s++)f=t(p[s]),f&&y.features.push(f);for(s=0;s<h.length;s++)f=n(h[s]),f&&y.features.push(f);for(s=0;s<v.length;s++)y.features.push(i(v[s]));return y}};return L}();"undefined"!=typeof e&&(e.exports=o)}).call(this,r("_process"))},{_process:3,xmldom:2}],10:[function(r,e,t){!function(r,n){"object"==typeof t&&"undefined"!=typeof e?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n(r.topojson=r.topojson||{})}(this,function(r){"use strict";function e(){}function t(r){if(!r)return e;var t,n,o=r.scale[0],i=r.scale[1],u=r.translate[0],a=r.translate[1];return function(r,e){e||(t=n=0),r[0]=(t+=r[0])*o+u,r[1]=(n+=r[1])*i+a}}function n(r){if(!r)return e;var t,n,o=r.scale[0],i=r.scale[1],u=r.translate[0],a=r.translate[1];return function(r,e){e||(t=n=0);var s=Math.round((r[0]-u)/o),f=Math.round((r[1]-a)/i);r[0]=s-t,r[1]=f-n,t=s,n=f}}function o(r,e){for(var t,n=r.length,o=n-e;o<--n;)t=r[o],r[o++]=r[n],r[n]=t}function i(r,e){for(var t=0,n=r.length;t<n;){var o=t+n>>>1;r[o]<e?t=o+1:n=o}return t}function u(r,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return a(r,e)})}:a(r,e)}function a(r,e){var t={type:"Feature",id:e.id,properties:e.properties||{},geometry:s(r,e)};return null==e.id&&delete t.id,t}function s(r,e){function n(r,e){e.length&&e.pop();for(var t,n=c[r<0?~r:r],i=0,u=n.length;i<u;++i)e.push(t=n[i].slice()),l(t,i);r<0&&o(e,u)}function i(r){return r=r.slice(),l(r,0),r}function u(r){for(var e=[],t=0,o=r.length;t<o;++t)n(r[t],e);return e.length<2&&e.push(e[0].slice()),e}function a(r){for(var e=u(r);e.length<4;)e.push(e[0].slice());return e}function s(r){return r.map(a)}function f(r){var e=r.type;return"GeometryCollection"===e?{type:e,geometries:r.geometries.map(f)}:e in p?{type:e,coordinates:p[e](r)}:null}var l=t(r.transform),c=r.arcs,p={Point:function(r){return i(r.coordinates)},MultiPoint:function(r){return r.coordinates.map(i)},LineString:function(r){return u(r.arcs)},MultiLineString:function(r){return r.arcs.map(u)},Polygon:function(r){return s(r.arcs)},MultiPolygon:function(r){return r.arcs.map(s)}};return f(e)}function f(r,e){function t(e){var t,n=r.arcs[e<0?~e:e],o=n[0];return r.transform?(t=[0,0],n.forEach(function(r){t[0]+=r[0],t[1]+=r[1]})):t=n[n.length-1],e<0?[t,o]:[o,t]}function n(r,e){for(var t in r){var n=r[t];delete e[n.start],delete n.start,delete n.end,n.forEach(function(r){o[r<0?~r:r]=1}),a.push(n)}}var o={},i={},u={},a=[],s=-1;return e.forEach(function(t,n){var o,i=r.arcs[t<0?~t:t];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++s],e[s]=t,e[n]=o)}),e.forEach(function(r){var e,n,o=t(r),a=o[0],s=o[1];if(e=u[a])if(delete u[e.end],e.push(r),e.end=s,n=i[s]){delete i[n.start];var f=n===e?e:e.concat(n);i[f.start=e.start]=u[f.end=n.end]=f}else i[e.start]=u[e.end]=e;else if(e=i[s])if(delete i[e.start],e.unshift(r),e.start=a,n=u[a]){delete u[n.end];var l=n===e?e:n.concat(e);i[l.start=n.start]=u[l.end=e.end]=l}else i[e.start]=u[e.end]=e;else e=[r],i[e.start=a]=u[e.end=s]=e}),n(u,i),n(i,u),e.forEach(function(r){o[r<0?~r:r]||a.push([r])}),a}function l(r){return s(r,c.apply(this,arguments))}function c(r,e,t){function n(r){var e=r<0?~r:r;(l[e]||(l[e]=[])).push({i:r,g:s})}function o(r){r.forEach(n)}function i(r){r.forEach(o)}function u(r){"GeometryCollection"===r.type?r.geometries.forEach(u):r.type in c&&(s=r,c[r.type](r.arcs))}var a=[];if(arguments.length>1){var s,l=[],c={LineString:o,MultiLineString:i,Polygon:i,MultiPolygon:function(r){r.forEach(i)}};u(e),l.forEach(arguments.length<3?function(r){a.push(r[0].i)}:function(r){t(r[0].g,r[r.length-1].g)&&a.push(r[0].i)})}else for(var p=0,h=r.arcs.length;p<h;++p)a.push(p);return{type:"MultiLineString",arcs:f(r,a)}}function p(r){var e=r[0],t=r[1],n=r[2];return Math.abs((e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1]))}function h(r){for(var e,t=-1,n=r.length,o=r[n-1],i=0;++t<n;)e=o,o=r[t],i+=e[0]*o[1]-e[1]*o[0];return i/2}function d(r){return s(r,g.apply(this,arguments))}function g(r,e){function t(r){r.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(r)})}),i.push(r)}function n(e){return Math.abs(h(s(r,{type:"Polygon",arcs:[e]}).coordinates[0]))}var o={},i=[],u=[];return e.forEach(function(r){"Polygon"===r.type?t(r.arcs):"MultiPolygon"===r.type&&r.arcs.forEach(t)}),i.forEach(function(r){if(!r._){var e=[],t=[r];for(r._=1,u.push(e);r=t.pop();)e.push(r),r.forEach(function(r){r.forEach(function(r){o[r<0?~r:r].forEach(function(r){r._||(r._=1,t.push(r))})})})}}),i.forEach(function(r){delete r._}),{type:"MultiPolygon",arcs:u.map(function(e){var t,i=[];if(e.forEach(function(r){r.forEach(function(r){r.forEach(function(r){o[r<0?~r:r].length<2&&i.push(r)})})}),i=f(r,i),(t=i.length)>1)for(var u,a,s=1,l=n(i[0]);s<t;++s)(u=n(i[s]))>l&&(a=i[0],i[0]=i[s],i[s]=a,l=u);return i})}}function v(r){function e(r,e){r.forEach(function(r){r<0&&(r=~r);var t=o[r];t?t.push(e):o[r]=[e]})}function t(r,t){r.forEach(function(r){e(r,t)})}function n(r,e){"GeometryCollection"===r.type?r.geometries.forEach(function(r){n(r,e)}):r.type in a&&a[r.type](r.arcs,e)}var o={},u=r.map(function(){return[]}),a={LineString:e,MultiLineString:t,Polygon:t,MultiPolygon:function(r,e){r.forEach(function(r){t(r,e)})}};r.forEach(n);for(var s in o)for(var f=o[s],l=f.length,c=0;c<l;++c)for(var p=c+1;p<l;++p){var h,d=f[c],g=f[p];(h=u[d])[s=i(h,g)]!==g&&h.splice(s,0,g),(h=u[g])[s=i(h,d)]!==d&&h.splice(s,0,d)}return u}function y(r,e){return r[1][2]-e[1][2]}function m(){function r(r,e){for(;e>0;){var t=(e+1>>1)-1,o=n[t];if(y(r,o)>=0)break;n[o._=e]=o,n[r._=e=t]=r}}function e(r,e){for(;;){var t=e+1<<1,i=t-1,u=e,a=n[u];if(i<o&&y(n[i],a)<0&&(a=n[u=i]),t<o&&y(n[t],a)<0&&(a=n[u=t]),u===e)break;n[a._=e]=a,n[r._=e=u]=r}}var t={},n=[],o=0;return t.push=function(e){return r(n[e._=o]=e,o++),o},t.pop=function(){if(!(o<=0)){var r,t=n[0];return--o>0&&(r=n[o],e(n[r._=0]=r,0)),t}},t.remove=function(t){var i,u=t._;if(n[u]===t)return u!==--o&&(i=n[o],(y(i,t)<0?r:e)(n[i._=u]=i,u)),u},t}function w(r,e){function o(r){a.remove(r),r[1][2]=e(r),a.push(r)}var i=t(r.transform),u=n(r.transform),a=m();return e||(e=p),r.arcs.forEach(function(r){var t,n,s,f,l=[],c=0;for(n=0,s=r.length;n<s;++n)f=r[n],i(r[n]=[f[0],f[1],1/0],n);for(n=1,s=r.length-1;n<s;++n)t=r.slice(n-1,n+2),t[1][2]=e(t),l.push(t),a.push(t);for(n=0,s=l.length;n<s;++n)t=l[n],t.previous=l[n-1],t.next=l[n+1];for(;t=a.pop();){var p=t.previous,h=t.next;t[1][2]<c?t[1][2]=c:c=t[1][2],p&&(p.next=h,p[2]=t[2],o(p)),h&&(h.previous=p,h[0]=t[0],o(h))}r.forEach(u)}),r}var x="1.6.26";r.version=x,r.mesh=l,r.meshArcs=c,r.merge=d,r.mergeArcs=g,r.feature=u,r.neighbors=v,r.presimplify=w})},{}],11:[function(r,e,t){function n(r){function e(r){var e=v.substring(m).match(r);return e?(m+=e[0].length,e[0]):null}function t(r){return r&&y.match(/\d+/)&&(r.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+y}}),r}function n(){e(/^\s*/)}function o(){n();for(var r,t=0,o=[],i=[o],a=o;r=e(/^(\()/)||e(/^(\))/)||e(/^(\,)/)||e(u);){if("("===r)i.push(a),a=[],i[i.length-1].push(a),t++;else if(")"===r){if(0===a.length)return null;if(a=i.pop(),!a)return null;if(t--,0===t)break}else if(","===r)a=[],i[i.length-1].push(a);else{if(r.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,r.split(/\s/g).map(parseFloat))}n()}return 0!==t?null:o}function i(){for(var r,t,o=[];t=e(u)||e(/^(\,)/);)","===t?(o.push(r),r=[]):t.split(/\s/g).some(isNaN)||(r||(r=[]),Array.prototype.push.apply(r,t.split(/\s/g).map(parseFloat))),n();return r?(o.push(r),o.length?o:null):null}function a(){if(!e(/^(point)/i))return null;if(n(),!e(/^(\()/))return null;var r=i();return r?(n(),e(/^(\))/)?{type:"Point",coordinates:r[0]}:null):null}function s(){if(!e(/^(multipoint)/i))return null;n();var r=v.substring(v.indexOf("(")+1,v.length-1).replace(/\(/g,"").replace(/\)/g,"");v="MULTIPOINT ("+r+")";var t=o();return t?(n(),{type:"MultiPoint",coordinates:t}):null}function f(){if(!e(/^(multilinestring)/i))return null;n();var r=o();return r?(n(),{type:"MultiLineString",coordinates:r}):null}function l(){if(!e(/^(linestring)/i))return null;if(n(),!e(/^(\()/))return null;var r=i();return r&&e(/^(\))/)?{type:"LineString",coordinates:r}:null}function c(){if(!e(/^(polygon)/i))return null;n();var r=o();return r?{type:"Polygon",coordinates:r}:null}function p(){if(!e(/^(multipolygon)/i))return null;n();var r=o();return r?{type:"MultiPolygon",coordinates:r}:null}function h(){var r,t=[];if(!e(/^(geometrycollection)/i))return null;if(n(),!e(/^(\()/))return null;for(;r=d();)t.push(r),n(),e(/^(\,)/),n();return e(/^(\))/)?{type:"GeometryCollection",geometries:t}:null}function d(){return a()||l()||c()||s()||f()||p()||h()}var g=r.split(";"),v=g.pop(),y=(g.shift()||"").split("=").pop(),m=0;return t(d())}function o(r){function e(r){return r.join(" ")}function t(r){return r.map(e).join(", ")}function n(r){return r.map(t).map(u).join(", ")}function i(r){return r.map(n).map(u).join(", ")}function u(r){return"("+r+")"}switch("Feature"===r.type&&(r=r.geometry),r.type){case"Point":return"POINT ("+e(r.coordinates)+")";case"LineString":return"LINESTRING ("+t(r.coordinates)+")";case"Polygon":return"POLYGON ("+n(r.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+t(r.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+i(r.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+n(r.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+r.geometries.map(o).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}e.exports=n,e.exports.parse=n,e.exports.stringify=o;var i=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,u=new RegExp("^"+i.source+"(\\s"+i.source+"){1,}")},{}]},{},[1]);
